# vim:ft=zplug

# If we have Vim or Neovim, we want to install dein for plugin management
if (( $+commands[nvim] )) || (( $+commands[vim] )); then
    mkdir -p ~/.dein/repos/github.com/Shougo/
    if [ ! -d ~/.dein/repos/github.com/Shougo/dein.vim ]; then
        echo "Could not find dein plugin manager, downloading..."
        git clone https://github.com/Shougo/dein.vim.git ~/.dein/repos/github.com/Shougo/dein.vim
    fi
fi

# For ZSH we want zplug to manage plugins
if [ ! -d ~/.zplug ]; then
    echo "Could not find zplug plugin manager, downloading..."
    git clone https://github.com/b4b4r07/zplug ~/.zplug
fi

source ~/.zplug/init.zsh

# Any  Prezto modules needs to be loaded first
#plug "modules/helper", from:prezto

# https://github.com/sorin-ionescu/prezto/tree/master/modules/git
zplug "modules/git", from:prezto, if:"(( $+commands[git] ))"
zstyle ":prezto:module:git:status:ignore" submodules "all"

# https://github.com/sorin-ionescu/prezto/tree/master/modules/python
zplug "modules/python", from:prezto, if:"(( $+commands[python] ))"
zstyle ':prezto:module:python:virtualenv' auto-switch 'yes'

# https://github.com/sorin-ionescu/prezto/tree/master/modules/pacman
#zplug "modulez/pacman", from:prezto, if:"(( $+commands[pacman] ))"
#zstyle ':prezto:module:pacman' frontend 'pacaur'

# https://github.com/sorin-ionescu/prezto/tree/master/modules/dpkg
#zplug "modules/dpkg", from:prezto, if:"(( $+commands[dpkg] ))"

# https://github.com/sorin-ionescu/prezto/tree/master/modules/dnf
zplug "modules/dnf", from:prezto, if:"(( $+commands[dnf] ))"

# https://github.com/sorin-ionescu/prezto/blob/master/modules/gpg
#zplug "modules/gpg", from:prezto, if:"(( $+commands[gpg-agent] ))"

# https://github.com/sorin-ionescu/prezto/tree/master/modules/ssh
#zplug "modules/ssh", from:prezto, if:"(( $+commands[ssh] ))"

# https://github.com/sorin-ionescu/prezto/tree/master/modules/utility
zplug "modules/utility", from:prezto

#zplug "modules/editor", from:prezto
zstyle ":prezto:module:editor" key-bindings "vi"

# https://github.com/sorin-ionescu/prezto/tree/master/modules/tmux
zplug "modules/tmux", from:prezto, if:"(( $+commands[tmux] ))"

# https://github.com/sorin-ionescu/prezto/tree/master/modules/yum
#zplug "modules/yum", from:prezto, if:"(( $+commands[yum] ))"

# https://github.com/robbyrussell/oh-my-zsh/blob/master/plugins/command-not-found/command-not-found.plugin.zsh
zplug "plugins/command-not-found",   from:oh-my-zsh, ignore:oh-my-zsh.sh

zplug "plugins/ssh-agent", from:oh-my-zsh
zplug "plugins/gpg-agent", from:oh-my-zsh

# https://github.com/djui/alias-tips
zplug "djui/alias-tips", from:github

# https://github.com/skx/sysadmin-util
zplug "skx/sysadmin-util", from:github

#zplug "zlsun/solarized-man", from:github

#zplug "joel-porquet/zsh-dircolors-solarized", from:github

# https://github.com/chrissicool/zsh-256color
zplug "chrissicool/zsh-256color", from:github

# https://github.com/zsh-users/zsh-completions
zplug "zsh-users/zsh-completions", from:github

#
zplug "zsh-users/zsh-autosuggestions", from:github
zplug "srijanshetty/zsh-pip-completion", from:github
zplug "bbenne10/goenv", from:github
zplug "mafredri/zsh-async", from:github
zplug "caarlos0/zsh-mkc", from:github
zplug "b4b4r07/enhancd", from:github
#zplug "tomfrost/frost-zsh-prompt", use:frost.zsh, from:github, as:theme
#zplug "bhilburn/powerlevel9k", use:powerlevel9k.zsh-theme, from:github
zplug romkatv/powerlevel10k, use:powerlevel10k.zsh-theme, from:github
zplug "Tarrasch/zsh-autoenv", from:github

# Let zplug manage itself
zplug "zplug/zplug", hook-build:"zplug --self-manage"


# zsh-syntax-highlighting must be loaded before substring-search
# And these two really should be at the end of the loading list

# https://github.com/zsh-users/zsh-syntax-highlighting
zplug "zsh-users/zsh-syntax-highlighting", from:github

# https://github.com/zsh-users/zsh-history-substring-search
zplug "zsh-users/zsh-history-substring-search", from:github


# Install plugins if there are plugins that have not been installed
if ! zplug check; then
    printf "Install missing ZSH plugins? [y/N]: "
    if read -q; then
        echo; zplug install
    fi
fi

# Then, source plugins and add commands to $PATH
zplug load

